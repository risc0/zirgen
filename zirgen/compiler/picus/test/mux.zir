// RUN: zirgen %s --emit=picus | FileCheck %s

// CHECK: (prime-number 2013265921)
// CHECK-NEXT: (begin-module Top)
// CHECK-NEXT: (output result__layout_first__super__super)
// CHECK-NEXT: (output result__layout_x__super__super__super)
// CHECK-NEXT: (output result__layout_x_arm0__super__super__super)
// CHECK-NEXT: (output result__layout_x_arm1__super__super__super)
// CHECK-NEXT: (output result_first__super__super)
// CHECK-NEXT: (output result_x__super__super)
// CHECK-NEXT: (assert (= (- 0 result__layout_first__super__super) 0))
// CHECK-NEXT: ; begin mux
// CHECK-NEXT: (assert (= (* (- 1 result__layout_first__super__super) result__layout_x__super__super__super) (* (- 1 result__layout_first__super__super) result__layout_x_arm0__super__super__super)))
// CHECK-NEXT: (assert (= (- 7 result__layout_x_arm0__super__super__super) 0))
// CHECK-NEXT: ; mark mux arm
// CHECK-NEXT: (assert (= (* result__layout_first__super__super result__layout_x__super__super__super) (* result__layout_first__super__super result__layout_x_arm1__super__super__super)))
// CHECK-NEXT: (assert (= (- 8 result__layout_x_arm1__super__super__super) 0))
// CHECK-NEXT: ; mark mux arm
// CHECK-NEXT: (assert (= mux_x0__layout__super__super (+ (* (- 1 result__layout_first__super__super) result__layout_x_arm0__super__super__super) (* result__layout_first__super__super result__layout_x_arm1__super__super__super))))
// CHECK-NEXT: (assert (= mux_x0__super__super (+ (* (- 1 result__layout_first__super__super) result__layout_x_arm0__super__super__super) (* result__layout_first__super__super result__layout_x_arm1__super__super__super))))
// CHECK-NEXT: ; end mux
// CHECK-NEXT: (assert (= result_first__super__super result__layout_first__super__super))
// CHECK-NEXT: (assert (= result_x__super__super result__layout_x__super__super__super))
// CHECK-NEXT: (end-module)

#[picus_analyze]
component Top() {
  public first := Reg(0);
  public x := [1 - first, first] -> (Reg(7), Reg(8));
  Log("x = %u", x);
}
